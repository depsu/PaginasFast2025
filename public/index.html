<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PaginasFast - Desarrollo de Páginas Web Rápidas y Optimizadas</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/feather-icons"></script>

    <style>
        /* Estilos personalizados para PaginasFast */
        body {
            font-family: 'Inter', sans-serif;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .cta-button {
            transition: all 0.3s ease;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.12);
        }

        html {
            scroll-behavior: smooth;
        }


        /* --- Estilos del Chatbot y Modal --- */
        .loader {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        .loader-dark {
             border: 3px solid rgba(0, 0, 0, 0.2);
             border-top-color: #3B82F6; /* blue-600 */
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .chat-opener {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #3B82F6, #6D28D9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: transform 0.3s ease, opacity 0.3s ease;
            z-index: 1000;
        }

        .chat-opener:hover {
            transform: scale(1.1);
        }

        .chat-window {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 90%;
            max-width: 400px;
            height: 70vh;
            max-height: 600px;
            background-color: #111827; /* gray-900 */
            border: 1px solid #374151; /* gray-700 */
            border-radius: 1.5rem;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 30px rgba(0, 0, 0, 0.3);
            transform: translateY(20px) scale(0.95);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            z-index: 999;
            pointer-events: none;
        }

        .chat-window.open {
            transform: translateY(0) scale(1);
            opacity: 1;
            pointer-events: auto;
        }

        .chat-opener.hidden {
            transform: scale(0);
            opacity: 0;
        }

        .chat-header {
            background-color: #1f2937; /* gray-800 */
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #374151;
            color: white;
        }

        .chat-header-title {
            font-weight: 700;
        }

        .chat-close-btn {
            background: none;
            border: none;
            color: #9ca3af;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .chat-messages {
            flex-grow: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .chat-bubble {
            max-width: 85%;
            padding: 0.6rem 1rem;
            border-radius: 1.25rem;
            word-wrap: break-word;
            line-height: 1.5;
            color: white;
        }

        .user-bubble {
            background-color: #3B82F6; /* blue-600 */
            border-bottom-right-radius: 0.375rem;
            align-self: flex-end;
        }

        .bot-bubble {
            background-color: #374151; /* gray-700 */
            color: #d1d5db;
            border-bottom-left-radius: 0.375rem;
            align-self: flex-start;
        }
        
        .summary-notification {
            background-color: #4f46e520;
            color: #c7d2fe;
            border: 1px solid #4f46e5;
            border-radius: 0.5rem;
            padding: 1rem;
            font-size: 0.9em;
            text-align: left;
        }
        
        .chat-input-form {
            display: flex;
            gap: 0.5rem;
            padding: 0.75rem;
            border-top: 1px solid #374151;
            background-color: #1f2937;
        }

        .chat-input {
            flex-grow: 1;
            background-color: #374151;
            border: 1px solid #4b5563;
            border-radius: 9999px;
            padding: 0.75rem 1rem;
            color: white;
            outline: none;
        }

        .chat-input:focus {
            border-color: #3B82F6; /* blue-600 */
        }

        .chat-send-btn {
            background-color: #3B82F6; /* blue-600 */
            color: white;
            border-radius: 50%;
            padding: 0.75rem;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-send-btn:hover {
            background-color: #2563EB; /* blue-700 */
        }

        .chat-send-btn:disabled {
            background-color: #374151;
            cursor: not-allowed;
        }

        .modal {
            transition: opacity 0.3s ease;
        }
    </style>
</head>

<body class="bg-white text-gray-800">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-gray-900">
                <span class="text-blue-600">Paginas</span>Fast.
            </a>
            <div class="hidden md:flex space-x-8 items-center">
                <a href="#servicios" class="text-gray-600 hover:text-blue-600 font-medium">Servicios</a>
                <a href="#ceo" class="text-gray-600 hover:text-blue-600 font-medium">Nuestro Compromiso</a>
                <a href="#portafolio" class="text-gray-600 hover:text-blue-600 font-medium">Proyectos</a>
                <a href="#contacto" id="nav-contact-btn"
                    class="bg-blue-600 text-white px-5 py-2 rounded-full font-semibold hover:bg-blue-700 transition-colors cursor-pointer">Cotizar
                    Página Web</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden">
                <i data-feather="menu" class="h-6 w-6 text-gray-800"></i>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#servicios" class="block py-2 text-gray-600 hover:text-blue-600">Servicios</a>
            <a href="#ceo" class="block py-2 text-gray-600 hover:text-blue-600">Nuestro Compromiso</a>
            <a href="#portafolio" class="block py-2 text-gray-600 hover:text-blue-600">Proyectos</a>
            <a href="#contacto"
                class="block mt-2 bg-blue-600 text-white text-center px-5 py-2 rounded-full font-semibold hover:bg-blue-700 transition-colors">Cotizar
                Página Web</a>
        </div>
    </header>

    <main class="gradient-bg">
        <section class="container mx-auto px-6 py-20 md:py-32 text-center">
            <h1 class="text-4xl md:text-6xl font-extrabold text-gray-900 leading-tight mb-4">
                Páginas Web Rápidas que <span class="text-blue-600">Impulsan tu Negocio</span>
            </h1>
            <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto mb-8">
                En PaginasFast, nos especializamos en el <strong>desarrollo de sitios web ultrarrápidos</strong>,
                optimizados para SEO y diseñados para convertir. Tu éxito digital empieza con una página web veloz y
                eficaz, perfectamente adaptada a móviles.
            </p>
            <a href="#contacto"
                class="cta-button inline-block bg-blue-600 text-white px-10 py-4 rounded-full font-bold text-lg shadow-lg hover:bg-blue-700">
                Obtén tu Página Web Ahora
            </a>
        </section>
    </main>

    <section id="servicios" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900">Planes de Desarrollo Web a tu Medida</h2>
                <p class="text-gray-600 mt-2">Soluciones de diseño web profesional, claras y transparentes para cada
                    negocio.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div
                    class="service-card bg-gray-50 rounded-xl p-8 shadow-md transition-all duration-300 border border-gray-200 flex flex-col">
                    <div class="text-blue-600 mb-4"><i data-feather="layout" class="h-10 w-10"></i></div>
                    <h3 class="text-2xl font-bold mb-2">Web Emprendedor</h3>
                    <div class="my-4 text-center">
                        <span class="text-4xl font-extrabold text-gray-900">$100.000</span>
                        <p class="text-gray-500 text-sm">CLP / Pago único</p>
                    </div>
                    <p class="text-gray-600 mb-6 flex-grow">Ideal para startups y profesionales que buscan una página de
                        aterrizaje (landing page) o un sitio presencial efectivo y económico.</p>
                    <ul class="text-gray-700 space-y-3 mb-8">
                        <li class="flex items-center"><i data-feather="check-circle"
                                class="h-5 w-5 text-green-500 mr-2"></i>3 a 5 Secciones</li>
                        <li class="flex items-center"><i data-feather="check-circle"
                                class="h-5 w-5 text-green-500 mr-2"></i>Diseño Web Adaptable</li>
                        <li class="flex items-center"><i data-feather="check-circle"
                                class="h-5 w-5 text-green-500 mr-2"></i>Formulario de Contacto</li>
                        <li class="flex items-center"><i data-feather="check-circle"
                                class="h-5 w-5 text-green-500 mr-2"></i>Optimización SEO Inicial</li>
                    </ul>
                    <button
                        class="chat-cta w-full mt-auto text-center bg-blue-100 text-blue-700 font-semibold py-3 rounded-lg hover:bg-blue-200 transition-colors">Solicitar
                        Información</button>
                </div>

                <div
                    class="service-card bg-blue-600 text-white rounded-xl p-8 shadow-xl transition-all duration-300 transform md:scale-105 flex flex-col">
                    <div class="text-white mb-4"><i data-feather="briefcase" class="h-10 w-10"></i></div>
                    <h3 class="text-2xl font-bold mb-2">Web Corporativa</h3>
                    <div class="my-4 text-center">
                        <span class="text-4xl font-extrabold text-white">$300.000</span>
                        <p class="text-blue-200 text-sm">CLP / Pago único</p>
                    </div>
                    <p class="text-blue-100 mb-6 flex-grow">La solución de desarrollo web completa para empresas que
                        buscan consolidar su marca y generar clientes potenciales.</p>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-center"><i data-feather="check-circle"
                                class="h-5 w-5 text-green-300 mr-2"></i>Hasta 10 Secciones</li>
                        <li class="flex items-center"><i data-feather="check-circle"
                                class="h-5 w-5 text-green-300 mr-2"></i>Diseño Premium a Medida</li>
                        <li class="flex items-center"><i data-feather="check-circle"
                                class="h-5 w-5 text-green-300 mr-2"></i>Integración con Blog</li>
                        <li class="flex items-center"><i data-feather="check-circle"
                                class="h-5 w-5 text-green-300 mr-2"></i>Optimización SEO Avanzada</li>
                    </ul>
                    <button
                        class="chat-cta w-full mt-auto text-center bg-white text-blue-600 font-bold py-3 rounded-lg hover:bg-gray-100 transition-colors">Comprar
                        este Plan</button>
                </div>

                <div
                    class="service-card bg-gray-50 rounded-xl p-8 shadow-md transition-all duration-300 border border-gray-200 flex flex-col">
                    <div class="text-blue-600 mb-4"><i data-feather="shopping-cart" class="h-10 w-10"></i></div>
                    <h3 class="text-2xl font-bold mb-2">Tienda Online</h3>
                    <div class="my-4 text-center">
                        <span class="text-4xl font-extrabold text-gray-900">$300.000</span>
                        <p class="text-gray-500 text-sm">CLP / Pago único</p>
                    </div>
                    <p class="text-gray-600 mb-6 flex-grow">Lanza tu e-commerce y vende 24/7 con una plataforma robusta,
                        segura y fácil de gestionar para tus productos.</p>
                    <ul class="text-gray-700 space-y-3 mb-8">
                        <li class="flex items-center"><i data-feather="check-circle"
                                class="h-5 w-5 text-green-500 mr-2"></i>Catálogo de Productos</li>
                        <li class="flex items-center"><i data-feather="check-circle"
                                class="h-5 w-5 text-green-500 mr-2"></i>Pasarelas de Pago Seguras</li>
                        <li class="flex items-center"><i data-feather="check-circle"
                                class="h-5 w-5 text-green-500 mr-2"></i>Gestión de Inventario</li>
                        <li class="flex items-center"><i data-feather="check-circle"
                                class="h-5 w-5 text-green-500 mr-2"></i>Carrito de Compras Optimizado</li>
                    </ul>
                    <button
                        class="chat-cta w-full mt-auto text-center bg-blue-100 text-blue-700 font-semibold py-3 rounded-lg hover:bg-blue-200 transition-colors">Solicitar
                        Información</button>
                </div>
            </div>
        </div>
    </section>
    
    <section id="ceo" class="py-20 bg-gray-100">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/3 text-center">
                    <img src="https://placehold.co/400x400/3B82F6/FFFFFF?text=CEO" alt="Alex Morales - CEO de PaginasFast"
                        class="rounded-full w-64 h-64 mx-auto shadow-xl border-4 border-white">
                </div>
                <div class="md:w-2/3">
                    <p class="text-blue-600 font-semibold mb-2">Una Visión, Un Compromiso Contigo</p>
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Un Fundador Enfocado en tus Resultados
                    </h2>
                    <p class="text-gray-600 mb-4 text-lg">
                        Hola, soy <span class="font-bold text-gray-800">Alex Morales</span>, fundador de PaginasFast. Mi
                        pasión es crear páginas web que no solo sean bonitas, sino que funcionen como una verdadera
                        herramienta de ventas para mis clientes.
                    </p>
                    <p class="text-gray-600 mb-6">
                        No vendemos plantillas. Nos involucramos para entender tu negocio y construir la página web que
                        necesitas para triunfar. Tu éxito es la medida de nuestro propio éxito.
                    </p>
                    <div class="border-l-4 border-blue-500 pl-4">
                        <p class="text-gray-700 italic">"Una página web lenta o confusa te hace perder clientes cada
                            segundo. Me comprometo a entregarte un sitio web rápido, claro y optimizado para que cada
                            visita cuente."</p>
                        <p class="font-semibold mt-2">- Alex Morales, CEO de PaginasFast</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="portafolio" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900">Nuestros Diseños Web en Acción</h2>
                <p class="text-gray-600 mt-2">Clientes que ya están vendiendo más gracias a su nueva página web.</p>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="group relative rounded-lg overflow-hidden shadow-lg">
                    <img src="https://placehold.co/600x400/c3cfe2/1f2937?text=Proyecto+Web+1"
                        alt="Diseño web para Fintech"
                        class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-6">
                        <h3 class="text-white text-2xl font-bold">Fintech Innovadora</h3>
                    </div>
                </div>
                <div class="group relative rounded-lg overflow-hidden shadow-lg">
                    <img src="https://placehold.co/600x400/a8b2c4/1f2937?text=Proyecto+Web+2"
                        alt="Página web para marca de moda"
                        class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-6">
                        <h3 class="text-white text-2xl font-bold">Marca de Moda Sostenible</h3>
                    </div>
                </div>
                <div class="group relative rounded-lg overflow-hidden shadow-lg">
                    <img src="https://placehold.co/600x400/8d97af/1f2937?text=Proyecto+Web+3"
                        alt="Desarrollo web para consultora"
                        class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-6">
                        <h3 class="text-white text-2xl font-bold">Consultora de Negocios</h3>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="contacto" class="py-20 gradient-bg">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900">¿Listo para Conseguir más Clientes?</h2>
            <p class="text-gray-600 mt-2 max-w-2xl mx-auto">Hablemos de tu proyecto. La primera consulta es gratis y sin compromiso.</p>
             <button id="open-modal-btn" class="mt-8 cta-button inline-block bg-blue-600 text-white px-10 py-4 rounded-full font-bold text-lg shadow-lg hover:bg-blue-700">
                Agendar una Llamada
            </button>
        </div>
    </section>

    <footer class="bg-gray-900 text-white">
        <div class="container mx-auto px-6 py-12">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left">
                <div>
                    <h3 class="text-xl font-bold mb-4"><span class="text-blue-500">Paginas</span>Fast.</h3>
                    <p class="text-gray-400">Desarrollo de páginas web rápidas para hacer crecer tu negocio.</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Enlaces Rápidos</h3>
                    <ul class="space-y-2">
                        <li><a href="#servicios" class="text-gray-400 hover:text-white">Planes Web</a></li>
                        <li><a href="#portafolio" class="text-gray-400 hover:text-white">Proyectos</a></li>
                        <li><a href="#contacto" class="text-gray-400 hover:text-white">Cotizar</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contacto</h3>
                    <p class="text-gray-400">contacto@paginasfast.com</p>
                    <div class="flex justify-center md:justify-start space-x-4 mt-4">
                        <a href="#" class="text-gray-400 hover:text-white"><i data-feather="twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i data-feather="linkedin"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i data-feather="instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="mt-12 border-t border-gray-800 pt-6 text-center text-gray-500">
                <p>&copy; 2024 PaginasFast. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <div id="chat-opener" class="chat-opener">
        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg" style="width: 32px; height: 32px;">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z">
            </path>
        </svg>
    </div>

    <div id="chat-window" class="chat-window">
        <div class="chat-header">
            <span class="chat-header-title">Asistente Virtual</span>
            <button id="chat-close-btn" class="chat-close-btn">&times;</button>
        </div>
        <div id="chat-messages" class="chat-messages">
            <div class="chat-bubble bot-bubble">¡Hola! 👋 Soy tu asistente experto de PaginasFast. Para empezar a cotizar tu nueva página web, ¿podrías decirme tu nombre?</div>
        </div>
        <form id="chat-form" class="chat-input-form">
            <input type="text" id="user-input" placeholder="Escribe tu respuesta..." class="chat-input"
                autocomplete="off">
            <button type="submit" id="send-button" class="chat-send-btn" aria-label="Enviar mensaje">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" style="width: 20px; height: 20px;">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                </svg>
            </button>
        </form>
    </div>
    
    <div id="contact-modal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full relative transform scale-95 transition-transform duration-300">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-black text-2xl">&times;</button>
            <h3 class="text-2xl font-bold text-gray-900 mb-2">Agendar una Llamada</h3>
            <p class="text-gray-600 mb-6">Déjanos tus datos y nos pondremos en contacto a la brevedad.</p>
            <form id="contact-form">
                <div class="mb-4">
                    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
                    <input type="text" id="name-modal" name="name" required
                        class="w-full p-3 bg-gray-100 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-500">
                </div>
                <div class="mb-4">
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Correo Electrónico</label>
                    <input type="email" id="email-modal" name="email" required
                        class="w-full p-3 bg-gray-100 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-500">
                </div>
                <div class="mb-6">
                    <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Teléfono (Opcional)</label>
                    <input type="tel" id="phone-modal" name="phone"
                        class="w-full p-3 bg-gray-100 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-500">
                </div>

                <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center min-h-[48px]">
                   <span class="btn-text">Enviar Solicitud</span>
                   <div class="loader loader-dark hidden"></div>
                </button>
            </form>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Inicializar Feather Icons
            feather.replace();

            // Lógica del menú móvil
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            // --- LÓGICA DEL MODAL Y CHATBOT ---
            const modal = document.getElementById('contact-modal');
            const modalContent = modal.querySelector('div');
            const openModalBtn = document.getElementById('open-modal-btn');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const navContactBtn = document.getElementById('nav-contact-btn');
            const contactForm = document.getElementById('contact-form');
            
            const chatOpener = document.getElementById('chat-opener');
            const chatWindow = document.getElementById('chat-window');
            const closeChatBtn = document.getElementById('chat-close-btn');
            const chatCTAs = document.querySelectorAll('.chat-cta');

            // Modal Logic
            const openModal = () => {
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.classList.add('opacity-100');
                    modalContent.classList.add('scale-100');
                }, 10);
            };
            const closeModal = () => {
                modal.classList.remove('opacity-100');
                modalContent.classList.remove('scale-100');
                setTimeout(() => modal.classList.add('hidden'), 300);
            };
            
            // Event Listeners para abrir y cerrar el modal
            if(openModalBtn) openModalBtn.addEventListener('click', openModal);
            if(navContactBtn) {
                 navContactBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    openModal();
                });
            }
            if(closeModalBtn) closeModalBtn.addEventListener('click', closeModal);
            if(modal) {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) closeModal();
                });
            }

            // Lógica de envío del formulario del modal
            if(contactForm) {
                 contactForm.addEventListener('submit', async (e) => {
                    e.preventDefault();

                    const submitButton = contactForm.querySelector('button[type="submit"]');
                    const buttonText = submitButton.querySelector('.btn-text');
                    const buttonLoader = submitButton.querySelector('.loader');

                    // Mostrar estado de carga
                    submitButton.disabled = true;
                    buttonText.classList.add('hidden');
                    buttonLoader.classList.remove('hidden');
                    
                    const name = document.getElementById('name-modal').value;
                    const email = document.getElementById('email-modal').value;
                    const phone = document.getElementById('phone-modal').value;

                    try {
                        const response = await fetch('/api/send-contact-form', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ name, email, phone }),
                        });

                        if (!response.ok) {
                            throw new Error('Falló el envío del formulario');
                        }

                        // Éxito
                        alert(`¡Gracias ${name}! Hemos recibido tu solicitud y te contactaremos pronto.`);
                        closeModal();
                        contactForm.reset();

                    } catch (error) {
                        console.error('Error en el formulario de contacto:', error);
                        alert('Lo sentimos, ocurrió un error al enviar tu solicitud. Por favor, intenta de nuevo.');
                    } finally {
                        // Restaurar botón
                        submitButton.disabled = false;
                        buttonText.classList.remove('hidden');
                        buttonLoader.classList.add('hidden');
                    }
                });
            }
           

            // Chatbot Logic
            const openChat = () => {
                chatWindow.classList.add('open');
                chatOpener.classList.add('hidden');
            };
            const closeChat = () => {
                chatWindow.classList.remove('open');
                chatOpener.classList.remove('hidden');
            };

            chatOpener.addEventListener('click', openChat);
            closeChatBtn.addEventListener('click', closeChat);
            chatCTAs.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    openChat();
                });
            });
            

            // --- LÓGICA CONVERSACIONAL DEL CHATBOT ---
            const chatFormEl = document.getElementById('chat-form');
            const userInput = document.getElementById('user-input');
            const chatMessages = document.getElementById('chat-messages');
            const sendButton = document.getElementById('send-button');

            let conversationHistory = [];
            let conversationEnded = false;
            const initialBotMessage = document.querySelector('.bot-bubble').textContent;
            conversationHistory.push({ role: 'model', parts: [{ text: initialBotMessage }] });

            chatFormEl.addEventListener('submit', async (e) => {
                e.preventDefault();
                if (conversationEnded) return;

                const userMessage = userInput.value.trim();
                if (!userMessage) return;

                appendMessage(userMessage, 'user');
                conversationHistory.push({ role: 'user', parts: [{ text: userMessage }] });
                userInput.value = '';
                userInput.focus();

                toggleLoading(true);

                try {
                    const botResponse = await getBotResponse();
                    appendMessage(botResponse, 'bot');
                    conversationHistory.push({ role: 'model', parts: [{ text: botResponse }] });

                    if (botResponse.includes("¡Excelente! He registrado tu información.")) {
                        conversationEnded = true;
                        userInput.disabled = true;
                        userInput.placeholder = "Conversación finalizada.";
                        await triggerSummaryGeneration();
                    }

                } catch (error) {
                    console.error("Error obteniendo respuesta del bot:", error);
                    appendMessage("Lo siento, algo salió mal. Por favor, intenta de nuevo.", 'bot');
                } finally {
                    toggleLoading(false);
                }
            });

            function appendMessage(message, sender, type = 'bubble') {
                const messageDiv = document.createElement('div');
                if (type === 'bubble') {
                    messageDiv.classList.add('chat-bubble', sender === 'user' ? 'user-bubble' : 'bot-bubble');
                    messageDiv.textContent = message;
                } else if (type === 'summary') {
                    messageDiv.classList.add('summary-notification');
                    messageDiv.innerHTML = message;
                }
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            function toggleLoading(isLoading) {
                const sendIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width: 20px; height: 20px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>`;
                sendButton.disabled = isLoading;
                sendButton.innerHTML = isLoading ? `<div class="loader"></div>` : sendIcon;
            }
            
            async function callGemini(payload) {
                // NOTA: Esta función asume que tienes un endpoint en tu servidor en '/api/chat'
                // que se encarga de llamar a la API de Google Gemini de forma segura.
                const apiUrl = '/api/chat'; 
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (!response.ok) {
                    const errorDetails = await response.text();
                    throw new Error(`Error en la API: ${response.status}. Detalles: ${errorDetails}`);
                }
                const result = await response.json();
                if (result.candidates && result.candidates[0]?.content?.parts?.[0]?.text) {
                    return result.candidates[0].content.parts[0].text.trim();
                } else {
                    return "No he podido procesar eso. ¿Podemos intentarlo de nuevo?";
                }
            }
            
            async function getBotResponse() {
                const knowledgeBase = `
                ---
                BASE DE CONOCIMIENTO ESTRATÉGICA PARA PAGINASFAST:
                1.  **Servicio Principal:** Desarrollo de páginas web ultra-rápidas, optimizadas para SEO y diseñadas para convertir visitas en clientes. El fundador es Alex Morales.
                2.  **Problemas que Solucionamos (Puntos de Dolor):** Páginas web lentas que aburren a los visitantes, mal ranking en Google, diseños que no se ven bien en celulares y baja generación de contactos o ventas a través de la web.
                3.  **Ventajas Clave:** Velocidad (mejora la experiencia y el SEO), diseño profesional a medida, optimización para buscadores y enfoque en resultados de negocio (más clientes).
                4.  **Planes y Precios (Pago Único en CLP):**
                    * **Web Emprendedor ($100.000):** Ideal para empezar. Es una landing page o sitio presencial de 3 a 5 secciones. Incluye diseño adaptable y SEO inicial.
                    * **Web Corporativa ($300.000):** La solución completa para empresas. Hasta 10 secciones, diseño premium y SEO avanzado.
                    * **Tienda Online ($300.000):** Para vender productos 24/7. Incluye catálogo, carrito de compras y pasarelas de pago.
                5.  **Regla de Oro:** Si te preguntan algo fuera de tu conocimiento (ej. sobre publicidad en redes sociales, etc.), responde con amabilidad: "Mi especialidad es todo sobre el desarrollo de páginas web de alto rendimiento. No tengo información sobre eso, pero con gusto te ayudo a analizar qué tipo de página web es la ideal para tu negocio."
                ---`;
                const systemInstructionText = `
                **Tu Rol (Persona):** Eres "WebExpert", un consultor de desarrollo web de PaginasFast. Eres amigable, profesional, proactivo y muy persuasivo. Tu misión es entender el proyecto del cliente, explicarle el valor de una página web rápida y profesional, y calificarlo como un lead de alta calidad.
                **Flujo de Conversación Estratégico (Paso a Paso):**
                1.  **Saludo y Gancho:** Preséntate y haz una pregunta inicial para enganchar.
                2.  **Calificación - OBTENER UNO POR UNO:** Pide amablemente y en orden: a. Nombre. b. Correo Electrónico. c. **Número de WhatsApp** (menciónalo como opcional pero útil para un contacto más rápido).
                3.  **Manejo de Preguntas:** Mientras pides los datos, usa la "BASE DE CONOCIMIENTO" para responder de forma persuasiva. Adapta tus respuestas al tipo de negocio del cliente si lo menciona.
                4.  **Cierre de Conversación:** Una vez que obtengas, como mínimo, el correo electrónico, DEBES usar la frase EXACTA: "¡Excelente! He registrado tu información. Uno de nuestros especialistas te contactará muy pronto para afinar los detalles. ¡Gracias!". No añadas ni quites nada a esta frase.
                **Reglas Clave de Comportamiento:**
                * **Sé Proactivo:** Si un cliente dice "tengo una cafetería", puedes responder: "¡Genial! Imagina una web veloz donde tus clientes vean tu menú, ubicación y te contacten al instante. Para darte una cotización precisa, ¿cuál es tu correo electrónico?".
                * **Usa la "Regla de Oro":** No inventes información. Cíñete a tu especialidad.`;

                const payload = {
                    contents: conversationHistory,
                    system_instruction: { parts: [{ text: `${knowledgeBase}\n${systemInstructionText}` }] },
                    generationConfig: { temperature: 0.7, topP: 1, maxOutputTokens: 200 }
                };
                return await callGemini(payload);
            }
            
            async function triggerSummaryGeneration() {
                appendMessage('<strong>Generando y enviando resumen del lead...</strong>', 'system', 'summary');

                const summaryPrompt = `Basado en el siguiente historial de conversación de PaginasFast, crea un resumen ejecutivo para un correo electrónico. Extrae los siguientes puntos clave en formato de lista: - Nombre del Cliente: - Email de Contacto: - Número de WhatsApp: (si no se proveyó, indica "No proporcionado") - Resumen de Necesidades: (Resume lo que el cliente busca, su tipo de negocio o sus dudas). Historial de la Conversación: ${JSON.stringify(conversationHistory)}`;

                const payload = { contents: [{ role: 'user', parts: [{ text: summaryPrompt }] }] };

                try {
                    // Obtener el resumen de Gemini
                    const summaryText = await callGemini(payload);

                    // Extraer el email del cliente del resumen
                    const emailMatch = summaryText.match(/Email de Contacto:\s*(\S+@\S+)/);
                    const leadEmail = emailMatch ? emailMatch[1] : 'Email no capturado';

                    // Enviar el resumen a la API /api/send-summary
                    await fetch('/api/send-summary', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ summaryText, leadEmail }),
                    });

                    // Mostrar notificación final al usuario
                     appendMessage("<strong>¡Gracias!</strong><p>Hemos recibido tu solicitud. Un especialista de PaginasFast te contactará muy pronto.</p>", 'system', 'summary');

                } catch (error) {
                    console.error("Error en el proceso de resumen y envío:", error);
                    appendMessage("No pudimos procesar tu solicitud final, pero no te preocupes, hemos guardado tus datos y un agente te contactará.", 'system', 'summary');
                }
            }
            
        });
    </script>
</body>

</html>